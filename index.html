<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1132954 -FinalTerm</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">围</div>
        <div class="titles">
          <h1>圍棋 Final Term</h1>
          <p>人類(黑)先手｜電腦(白)後手｜讓子｜提子｜禁著(自殺/劫)｜終局計分</p>
        </div>
      </div>

      <div class="controls">
        <div class="control">
          <label for="size">棋盤</label>
          <select id="size">
            <option value="9" selected>9 路</option>
            <option value="13">13 路</option>
            <option value="19">19 路</option>
          </select>
        </div>

        <div class="control">
          <label for="handicap">讓子(黑)</label>
          <select id="handicap">
            <option value="0" selected>0</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
          </select>
        </div>

        <div class="control">
          <label for="komi">貼目(白)</label>
          <input id="komi" type="number" step="0.5" value="6.5" />
        </div>

        <button id="passBtn" class="btn">Pass</button>
        <button id="scoreBtn" class="btn btn-accent" disabled>計分</button>
        <button id="resetBtn" class="btn btn-ghost">重置</button>
      </div>
    </header>

    <main class="main">
      <section class="left">
        <div class="panel">
          <div class="status">
            <div class="turn">
              <span class="dot" id="turnDot"></span>
              <span id="turnText">輪到：黑</span>
              <span id="modeBadge" class="badge">對局中</span>
            </div>
            <div class="meta">
              <span>黑提子：<b id="capBlack">0</b></span>
              <span>白提子：<b id="capWhite">0</b></span>
              <span class="warn" id="warnText"></span>
            </div>
          </div>

          <div class="board-wrap">
            <div id="board" class="board" aria-label="圍棋棋盤"></div>
          </div>

          <div class="hint" id="hint">
            黑先手。點交叉點落子；自殺禁手；單劫禁止立刻還原上一盤面。若白方在計算中會自動下子。
          </div>
        </div>
      </section>

      <aside class="right">
        <div class="panel panel-small">
          <h2>操作</h2>
          <ul>
            <li>你是黑棋：點交叉點落子</li>
            <li>電腦是白棋：你落子後自動回應</li>
            <li>Pass：跳過回合；連續兩次 Pass 可開始計分</li>
            <li>計分：進入/退出計分模式（點棋子標死子）</li>
          </ul>
        </div>

        <div class="panel panel-small">
          <h2>計分面板</h2>
          <div class="scorepanel">
            <div class="row"><span>黑地</span><b id="bTer">0</b></div>
            <div class="row"><span>白地</span><b id="wTer">0</b></div>
            <div class="row"><span>黑提子</span><b id="bPris">0</b></div>
            <div class="row"><span>白提子</span><b id="wPris">0</b></div>
            <div class="row"><span>貼目（白）</span><b id="komiShow">6.5</b></div>
            <div class="divider"></div>
            <div class="row total"><span>黑總分</span><b id="bTotal">0</b></div>
            <div class="row total"><span>白總分</span><b id="wTotal">0</b></div>
            <div class="result" id="resultText">尚未計分</div>

            <div class="scoreActions">
              <button id="recalcBtn" class="btn btn-ghost btn-small" disabled>重新計算</button>
              <button id="confirmBtn" class="btn btn-small" disabled>確認終局</button>
            </div>
          </div>
        </div>

        <div class="panel panel-small">
          <h2>棋譜</h2>
          <div id="moves" class="moves"></div>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <span>終局：連續兩次 Pass。計分：地 + 提子 + 死子(算提子) + 貼目。死活可在計分模式點棋子標記。</span>
    </footer>
  </div>

  <script src="./app.js"></script>
</body>
</html>
